<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Boost Media - Login e Loja</title>
<style>
  body { font-family: Arial, sans-serif; background: #111827; color: white; margin:0; padding:0;}
  section { max-width: 900px; margin: 40px auto; padding: 20px; background: #1e293b; border-radius: 15px;}
  input, button { padding: 10px; font-size: 1em; border-radius: 8px; border: none; margin: 10px 0; width: 100%;}
  button { background: #4f46e5; color: white; cursor: pointer; font-weight: bold; }
  button:hover { background: #4338ca; }
  .hidden { display: none; }
  .product { background: #111827; padding: 15px; margin-bottom: 15px; border-radius: 10px; }
  .product img { height: 50px; vertical-align: middle; }
  .product button { width: auto; margin-left: 10px; padding: 5px 15px; }
  #cart-items { margin-top: 15px; }
</style>
</head>
<body>

<!-- Login -->
<section id="loginSection">
  <h2>Login Boost Media</h2>
  <input type="email" id="loginEmail" placeholder="Seu e-mail" required />
  <input type="password" id="loginPassword" placeholder="Senha" required />
  <button id="loginBtn">Entrar</button>
  <p id="loginMsg" style="color:#f87171"></p>
  <p>Não tem conta? <a href="#" id="showRegisterLink" style="color:#4f46e5; cursor:pointer;">Cadastre-se aqui</a></p>
</section>

<!-- Cadastro -->
<section id="registerSection" class="hidden">
  <h2>Cadastro Boost Media</h2>
  <input type="email" id="registerEmail" placeholder="Seu e-mail" required />
  <input type="password" id="registerPassword" placeholder="Senha" required />
  <button id="registerBtn">Cadastrar</button>
  <p id="registerMsg" style="color:#f87171"></p>
  <p>Já tem conta? <a href="#" id="showLoginLink" style="color:#4f46e5; cursor:pointer;">Faça login aqui</a></p>
</section>

<!-- Loja -->
<section id="shopSection" class="hidden">
  <h2>Bem-vindo, <span id="userEmailSpan"></span>!</h2>
  <button id="logoutBtn" style="background:#ef4444; margin-bottom:20px;">Sair</button>

  <h3>Produtos</h3>
  <div id="productList"></div>

  <h3>Carrinho</h3>
  <div id="cart-items">Carrinho vazio</div>
  <p><strong>Total: R$ <span id="totalPrice">0,00</span></strong></p>
</section>

<script>
  // Usuários salvos no localStorage
  function getUsers() {
    return JSON.parse(localStorage.getItem("boostUsers") || "[]");
  }
  function saveUsers(users) {
    localStorage.setItem("boostUsers", JSON.stringify(users));
  }

  // Guardar usuário logado no localStorage
  function setCurrentUser(email) {
    localStorage.setItem("boostCurrentUser", email);
  }
  function getCurrentUser() {
    return localStorage.getItem("boostCurrentUser");
  }
  function clearCurrentUser() {
    localStorage.removeItem("boostCurrentUser");
  }

  // Elementos DOM
  const loginSection = document.getElementById("loginSection");
  const registerSection = document.getElementById("registerSection");
  const shopSection = document.getElementById("shopSection");
  const loginMsg = document.getElementById("loginMsg");
  const registerMsg = document.getElementById("registerMsg");
  const userEmailSpan = document.getElementById("userEmailSpan");

  const loginEmail = document.getElementById("loginEmail");
  const loginPassword = document.getElementById("loginPassword");
  const loginBtn = document.getElementById("loginBtn");

  const registerEmail = document.getElementById("registerEmail");
  const registerPassword = document.getElementById("registerPassword");
  const registerBtn = document.getElementById("registerBtn");

  const showRegisterLink = document.getElementById("showRegisterLink");
  const showLoginLink = document.getElementById("showLoginLink");

  const logoutBtn = document.getElementById("logoutBtn");

  const productList = document.getElementById("productList");
  const cartItems = document.getElementById("cart-items");
  const totalPriceSpan = document.getElementById("totalPrice");

  // Produtos fixos
  const products = [
    {id:1, name:"YouTube Premium", price:15, img:"https://img.icons8.com/color/48/youtube-premium.png"},
    {id:2, name:"Netflix", price:20, img:"https://img.icons8.com/color/48/netflix.png"},
    {id:3, name:"Prime Video", price:10, img:"https://img.icons8.com/color/48/amazon-prime-video.png"},
    {id:4, name:"Disney+", price:12, img:"https://img.icons8.com/color/48/disney-plus.png"},
    {id:5, name:"HBO Max", price:15, img:"https://img.icons8.com/color/48/hbo.png"},
    {id:6, name:"Paramount+", price:10, img:"https://img.icons8.com/color/48/paramount-plus.png"},
    {id:7, name:"Spotify Premium", price:50, img:"https://img.icons8.com/color/48/spotify.png"},
    {id:8, name:"Youcine", price:15, img:"https://img.icons8.com/color/48/tv.png"},
  ];

  // Estado do carrinho
  let cart = [];

  // Mostrar e esconder seções
  function showSection(section) {
    loginSection.classList.add("hidden");
    registerSection.classList.add("hidden");
    shopSection.classList.add("hidden");
    section.classList.remove("hidden");
  }

  // Renderizar produtos na loja
  function renderProducts() {
    productList.innerHTML = "";
    products.forEach(p => {
      const div = document.createElement("div");
      div.className = "product";
      div.innerHTML = `
        <img src="${p.img}" alt="${p.name}" /> ${p.name} - R$ ${p.price.toFixed(2).replace('.',',')}
        <button onclick="addToCart(${p.id})">Comprar</button>
      `;
      productList.appendChild(div);
    });
  }

  // Atualizar carrinho na tela
  function updateCart() {
    if(cart.length === 0){
      cartItems.textContent = "Carrinho vazio";
      totalPriceSpan.textContent = "0,00";
      return;
    }
    let total = 0;
    cartItems.innerHTML = "";
    cart.forEach(item => {
      const prod = products.find(p => p.id === item.id);
      const price = prod.price * item.qty;
      total += price;

      const div = document.createElement("div");
      div.textContent = `${prod.name} x${item.qty} - R$ ${price.toFixed(2).replace('.',',')}`;
      cartItems.appendChild(div);
    });
    totalPriceSpan.textContent = total.toFixed(2).replace('.',',');
  }

  // Adicionar produto ao carrinho
  window.addToCart = function(id) {
    let item = cart.find(i => i.id === id);
    if(item) {
      item.qty++;
    } else {
      cart.push({id:id, qty:1});
    }
    updateCart();
  }

  // Login
  loginBtn.addEventListener("click", () => {
    const email = loginEmail.value.trim().toLowerCase();
    const pass = loginPassword.value;

    if(!email || !pass){
      loginMsg.textContent = "Preencha e-mail e senha";
      return;
    }

    const users = getUsers();
    const user = users.find(u => u.email === email && u.password === pass);

    if(user){
      setCurrentUser(email);
      loginEmail.value = "";
      loginPassword.value = "";
      loginMsg.textContent = "";
      startShop();
    } else {
      loginMsg.textContent = "Email ou senha inválidos";
    }
  });

  // Cadastro
  registerBtn.addEventListener("click", () => {
    const email = registerEmail.value.trim().toLowerCase();
    const pass = registerPassword.value;

    if(!email || !pass){
      registerMsg.textContent = "Preencha e-mail e senha";
      return;
    }

    const users = getUsers();
    if(users.some(u => u.email === email)){
      registerMsg.textContent = "Usuário já cadastrado";
      return;
    }

    users.push({email: email, password: pass});
    saveUsers(users);
    registerEmail.value = "";
    registerPassword.value = "";
    registerMsg.style.color = "lightgreen";
    registerMsg.textContent = "Cadastro feito! Faça login.";
  });

  // Mostrar tela cadastro
  showRegisterLink.addEventListener("click", e => {
    e.preventDefault();
    showSection(registerSection);
  });

  // Mostrar tela login
  showLoginLink.addEventListener("click", e => {
    e.preventDefault();
    showSection(loginSection);
  });

  // Logout
  logoutBtn.addEventListener("click", () => {
    clearCurrentUser();
    cart = [];
    showSection(loginSection);
  });

  // Inicia loja após login
  function startShop(){
    const email = getCurrentUser();
    if(!email){
      showSection(loginSection);
      return;
    }
    userEmailSpan.textContent = email;
    showSection(shopSection);
    renderProducts();
    updateCart();
  }

  // Verificar login salvo no carregamento da página
  window.onload = () => {
    if(getCurrentUser()){
      startShop();
    } else {
      showSection(loginSection);
    }
  }
</script>

</body>
</html>
